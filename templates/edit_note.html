{% extends "base.html" %}

{% block content %}
<div class="note-form">
    <h2>Edit Note</h2>
    <form method="POST" enctype="multipart/form-data">
        <div>
            <label for="title">Title:</label>
            <input type="text" id="title" name="title" value="{{ note.title }}" required>
        </div>
        <div>
            <label for="content">Content:</label>
            <textarea id="content" name="content" rows="20" required>{{ note.content }}</textarea>
        </div>
        <div>
            <label for="tags">Tags (comma-separated):</label>
            <input type="text" id="tags" name="tags" value="{{ note.tags }}">
        </div>
        
        <!-- Add current attachments section -->
        {% if note.attachments %}
        <div class="current-attachments">
            <label>Current Attachments:</label>
            <ul class="attachment-list">
                {% for attachment in note.attachments %}
                <li>
                    <span class="attachment-name">ðŸ“Ž {{ attachment.original_filename }}</span>
                    <span class="attachment-meta">({{ (attachment.file_size / 1024)|round(1) }} KB)</span>
                    <a href="{{ url_for('delete_attachment', file_id=attachment.id) }}" 
                       class="delete-attachment"
                       onclick="return confirm('Delete this attachment?')">Ã—</a>
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
        
        <!-- Add new file upload section -->
        <div class="file-upload">
            <label for="files">Add Attachments:</label>
            <input type="file" id="files" name="files" multiple>
            <small>Allowed files: .txt, .pdf, .png, .jpg, .jpeg, .gif, .doc, .docx, .md (Max 16MB)</small>
        </div>
        
        <button type="submit">Update Note</button>
    </form>
</div>
{% endblock %} 